{% extends 'base.html' %}
{% block content %}

<h1>Recipe Details</h1>

<div class="row">
  <div></div>
    <div class="card">
      <div class="card-content">
        <span class="card-title">{{ recipe.name }}</span>
        <p>Ingredients: {{ recipe.ingredients|linebreaks }}</p>
        <p>Description: {{ recipe.description|linebreaks }}</p>
          <p>Directions: <br>{{ recipe.directions }}</p>
          <p>Region: {{ recipe.region }}</p>
      </div>
      <div class="card-action">
        <a href="{% url 'recipes_update' recipe.id %}">Edit</a>
        <a href="{% url 'recipes_delete' recipe.id %}">DELETE</a>
      </div>
      <div>
        <form action="{% url 'add_review' recipe.id %}" method="POST">
          {% csrf_token %}
          {{ review_form.as_p }}
          <input type="submit" class="btn" value="Add Review">
        </form>
      </div>
      <table class="striped">
        <thead>
          <tr><th>User</th><th>Date</th><th>Comment</th><th>Rating</th></tr>
        </thead>
        <tbody>
          {% for review in recipe.review_set.all %}
            <tr>
              <td>{{review.user}}</td>
              <td>{{review.date}}</td>
              <td>{{review.comment}}</td>
              <td>{{review.get_rating_display}}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>


    <script>
      const selectEl = document.getElementById('id_rating');
      M.FormSelect.init(selectEl);
  </script>
{% endblock %}